String.prototype.score=function(word,fuzziness){if(this===word)return 1;if(word==="")return 0;var runningScore=0,charScore,finalScore,string=this,lString=string.toLowerCase(),strLength=string.length,lWord=word.toLowerCase(),wordLength=word.length,idxOf,startAt=0,fuzzies=1,fuzzyFactor;if(fuzziness)fuzzyFactor=1-fuzziness;if(fuzziness){for(var i=0;i<wordLength;++i){idxOf=lString.indexOf(lWord[i],startAt);if(-1===idxOf){fuzzies+=fuzzyFactor;continue}else if(startAt===idxOf){charScore=.7}else{charScore=.1;if(string[idxOf-1]===" ")charScore+=.8}if(string[idxOf]===word[i])charScore+=.1;runningScore+=charScore;startAt=idxOf+1}}else{for(var i=0;i<wordLength;++i){idxOf=lString.indexOf(lWord[i],startAt);if(-1===idxOf){return 0}else if(startAt===idxOf){charScore=.7}else{charScore=.1;if(string[idxOf-1]===" ")charScore+=.8}runningScore+=charScore;startAt=idxOf+1}}finalScore=.5*(runningScore/strLength+runningScore/wordLength)/fuzzies;if(lWord[0]===lString[0]&&finalScore<.85){finalScore+=.15}return finalScore};